# وب اپلیکیشن

تا این فصل، برنامه‌های Elm را با استفاده از `Browser.element` ایجاد کرده‌ایم که به ما اجازه می‌دهد یک DOM Node را در یک برنامه بزرگ‌تر کنترل کنیم. اینکار برای _معرفی_ Elm در محل کار عالی است (همان‌طور که در [این بلاگ](https://elm-lang.org/blog/how-to-use-elm-at-work) توضیح داده شده است) اما بعد از آن چه اتفاقی می‌افتد؟ چگونه می‌توانیم از Elm به طور گسترده‌تری استفاده کنیم؟

در این فصل، یاد می‌گیریم که چگونه یک "وب اپلیکیشن" با تعدادی صفحه مختلف ایجاد کنیم که همه به خوبی با یکدیگر کار کنند، اما باید با کنترل یک صفحه واحد شروع کنیم.

## کنترل صفحه

اولین قدم این است که برنامه را با [`Browser.document`](https://package.elm-lang.org/packages/elm/browser/latest/Browser#document) آغاز کنیم:

```elm
document :
  { init : flags -> ( model, Cmd msg )
  , view : model -> Document msg
  , update : msg -> model -> ( model, Cmd msg )
  , subscriptions : model -> Sub msg
  }
  -> Program flags model msg
```

آرگومان‌ها، بجز تابع `view`، تقریبا مشابه `Browser.element` هستند. به جای بازگشت یک مقدار `Html`، یک [`Document`](https://package.elm-lang.org/packages/elm/browser/latest/Browser#Document) به این شکل باز می‌گردانید:

```elm
type alias Document msg =
  { title : String
  , body : List (Html msg)
  }
```

اینکار باعث می‌شود قابلیت کنترل `<title>` و `<body>` سند فعلی را داشته باشید. شاید برنامه مقداری داده دانلود کند تا هر صفحه عنوان سفارشی خود را داشته باشد. اکنون می‌توانید به سادگی این عنوان را در تابع `view` تغییر دهید!

## میزبانی صفحه

کامپایلر به طور پیشفرض یک فایل HTML تولید می‌کند، بنابراین می‌توانید برنامه را به این شکل کامپایل کنید:

```bash
elm make src/Main.elm
```

خروجی یک فایل `index.html` خواهد بود که می‌توانید آن را مانند هر فایل HTML دیگری استفاده کنید. اینکار به خوبی انجام می‌شود، اما می‌توانید با (۱) کامپایل Elm به JavaScript و (۲) ایجاد یک فایل HTML سفارشی، انعطاف‌پذیری بیشتری بدست آورید. برای این منظور، برنامه را به این شکل کامپایل کنید:

```bash
elm make src/Main.elm --output=main.js
```

این دستور، فایل `main.js` را تولید می‌کند که می‌توانید از یک فایل HTML سفارشی آن را فراخوانی کنید:

```html
<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <title>Main</title>
  <link rel="stylesheet" href="whatever-you-want.css">
  <script src="main.js"></script>
</head>
<body>
  <script>var app = Elm.Main.init();</script>
</body>
</html>
```

این فایل HTML نسبتا ساده است. هر چیزی که نیاز دارید را در قسمت `<head>` قرار می‌دهید و برنامه Elm را در قسمت `<body>` راه‌اندازی می‌کنید. برنامه Elm از آنجا ادامه می‌دهد و همه چیز را پردازش می‌کند.

در هر صورت، اکنون یک فایل HTML دارید که می‌توانید به مرورگرهای وب ارسال کنید. می‌توانید این فایل را با خدمات رایگانی مانند [GitHub Pages](https://pages.github.com/) یا [Netlify](https://www.netlify.com/) بدست کاربران برسانید، یا شاید یک سرور مجازی با خدماتی مانند [Digital Ocean](https://m.do.co/c/c47faa1916d2) راه‌اندازی کنید. هر سرویس میزبانی که برای شما مناسب باشد! فقط به روشی نیاز دارید که فایل HTML به مرورگر وب کاربران ارسال شود.

> **نکته ۱:**  اگر در حال سفارشی‌سازی با CSS هستید، ایجاد فایل HTML سفارشی مفید است. بسیاری از توسعه‌دهندگان از پروژه‌هایی مانند [`rtfeldman/elm-css`](https://package.elm-lang.org/packages/rtfeldman/elm-css/latest/) برای مدیریت تمام استایل‌های خود از داخل Elm استفاده می‌کنند، اما شاید در تیمی کار می‌کنید که CSS از پیش تعریف شده دارد. شاید در تیمی کار می‌کنید که یکی از آن پیش‌پردازنده‌های CSS را استفاده می‌کند. ایرادی ندارد. فقط فایل CSS نهایی را در قسمت `<head>` فایل HTML قرار دهید.
>
> **نکته ۲:** لینک Digital Ocean موجود در این صفحه، یک لینک ارجاعی است، بنابراین اگر از طریق آن ثبت نام و در نهایت از خدماتش استفاده کنید، یک اعتبار ۲۵ دلاری برای هزینه‌های میزبانی وبسایت‌های `elm-lang.org` و `package.elm-lang.org` دریافت خواهیم کرد.